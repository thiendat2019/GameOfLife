<?xml version="1.0"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<chapter id="chapter-first-steps">
  <title>Your First Steps with Jenkins</title>
  <sect1 id="sect-first-steps-introduction">
    <title>Introduction</title>
    <para>In this chapter, you'll take a quick guided tour through
    some of Jenkins’ key features. You’ll see first-hand just how easy
    it is to install Jenkins and set up your first Jenkins automated build
    job. We won’t dwell on the details too much—there are more details to come
    in the following chapters, as well as a detailed chapter on Jenkins
    Administration at the end of the book (<xref linkend="chapter-maintaining-jenkins"/>). This chapter is just an
    introduction. Still, by the end of the chapter, you'll also be keeping
    tabs on test results, generating javadoc, and publishing code coverage
    reports! You’ve got a lot of ground to cover, so let’s get started!</para>
  </sect1>
  <sect1 id="sect-first-steps-environment">
    <title>Preparing Your Environment</title>
    <para>There<indexterm class="startofrange" id="ch02-env" significance="normal"><primary>Jenkins</primary><secondary>environment, requirements for</secondary></indexterm> are two ways you can tackle this chapter. You can read
    through it without touching a keyboard, just to get an overview of what
    Jenkins is about. Or, you can get your hands dirty, and follow along on
    your own machine.</para>
    <para>If you <indexterm id="I_indexterm2_d1e949" significance="normal"><primary>version control systems</primary></indexterm>do want to follow along at home, you may need to set up some
    software on your machine. Remember, the most basic function of any
    CI tool is monitoring source code in a version control
    system, and fetching and building the latest version of source code
    whenever any changes are committed. So, you’ll need a version control
    system. In your case, you’ll be using <indexterm id="I_indexterm2_d1e953" significance="normal"><primary>Git</primary></indexterm><ulink url="http://git-scm.com">Git</ulink>. The central
    source code repository for our sample project is stored on <indexterm id="I_indexterm2_d1e959" significance="normal"><primary>GitHub repository</primary></indexterm><ulink url="https://github.com">GitHub</ulink>. Don’t worry
    about messing up this repository with your own changes, though: you’ll be
    creating your own fork of the repository that you can use as you wish. If
    you haven’t used Git and/or don’t have an account on GitHub yet, don’t
    worry. We’ll walk through the basics, and the whole installation process
    is well documented on the GitHub website. We’ll explain how to set it all
    up in great detail further on.</para>
    <?dbfo-need height=”1in”?>
    <para>In this chapter, you’ll be using Jenkins to build a Java application
    using Maven. <indexterm id="I_indexterm2_d1e968" significance="normal"><primary>Maven</primary></indexterm>Maven is a widely-used build tool in the Java world, with
    many powerful features, such as declarative dependency management,
    convention over configuration, and a large range of plugins. For your
    build, you'll also be using recent versions of the <indexterm id="I_indexterm2_d1e972" significance="normal"><primary>JDK (Java Development Kit)</primary></indexterm><indexterm id="I_indexterm2_d1e975" significance="normal"><primary>Java Development Kit</primary><see>JDK</see></indexterm>Java Development Kit (JDK) and Maven, but if you don’t have
    these installed on your machine, don’t fret! As you'll see, Jenkins
    installs them for you.</para>
    <sect2>
      <title>Installing Java</title>
      <para>The<indexterm id="I_indexterm2_d1e986" significance="normal"><primary>installation</primary><secondary>JRE</secondary></indexterm> first thing you'll need to install on your machine is
      Java. Jenkins is a Java web application, so you'll need at least the
      Java Runtime Environment, or JRE,<indexterm id="I_indexterm2_d1e992" significance="normal"><primary>JRE (Java Runtime Environment), installing</primary></indexterm><indexterm id="I_indexterm2_d1e995" significance="normal"><primary>Java Runtime Environment (JRE), installing</primary></indexterm> to run it. For the examples in this chapter, you'll
      need a recent version of Java (these examples were written with Java 6
      update 17, and the latest release at the time of writing was Java 6
      update 19). If you're not sure what version you're running, you can find out from the command
      line by running <literal moreinfo="none">java
      -version</literal>. If Java is installed on your machine, you should see
      something like this:</para>
      <screen format="linespecific">$ <userinput moreinfo="none">java -version</userinput>
java version "1.6.0_17"
Java(TM) SE Runtime Environment (build 1.6.0_17-b04-248-10M3025)
Java HotSpot(TM) 64-Bit Server VM (build 14.3-b01-101, mixed mode)</screen>
      <para>If you don’t have Java already installed, or if your version
      is an older one, download and install the latest JRE installer from the
      <ulink url="http://java.sun.com/javase/downloads/index.jsp">Java
      website</ulink>, as shown in <xref linkend="fig-installing-java"/>.</para>
      <figure float="0" id="fig-installing-java">
        <title>Installing Java</title>
        <mediaobject id="I_mediaobject2_d1e1017">
          <imageobject role="print">
            <imagedata fileref="figs/print/jtdg_0201.pdf" format="PDF"/>
          </imageobject>
          <imageobject role="web">
            <imagedata fileref="figs/web/jtdg_0201.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </figure>
    </sect2>
    <sect2>
      <title>Installing Git</title>
      <para>Since<indexterm id="I_indexterm2_d1e1027" significance="normal"><primary>installation</primary><secondary>Git</secondary></indexterm><indexterm id="I_indexterm2_d1e1032" significance="normal"><primary>Git</primary><secondary>installing</secondary></indexterm> you'll be using Git, you'll need to install and
      configure Git on your machine. If you're new to Git, you might want to
      run through the basics on the <ulink url="http://gitref.org">Git
      Reference website</ulink>. If you get lost, the whole process is
      well documented on the <ulink url="http://help.github.com">GitHub help
      pages</ulink>.</para>
      <para>First of all, you need to install Git on your machine. This
      involves downloading the appropriate installer for your operating system
      from the <ulink url="http://git-scm.com">Git website</ulink>. There are
      packaged installers for both Windows and Mac OS X. If you're using
      Linux, you're in Git’s home ground - most Linux distributions include Git. On Ubuntu
      or other Debian-based distributions, you could run something
      like:</para>
      <screen format="linespecific">$ <userinput moreinfo="none">sudo apt-get install git-core</userinput></screen>
      <para>On Fedora or another RPM-based distributions, you could use
      <literal moreinfo="none">yum</literal> instead:</para>
      <screen format="linespecific">$ <userinput moreinfo="none">sudo yum install git-core</userinput></screen>
      <para>On Linux you also have the option of installing Git
      from source. There are instructions on how to do this on the
      Git website.</para>
      <?dbfo-need height=”1in”?>
      <para>Once you're done, check that Git is installed and available by
      invoking it from the command line:</para>
      <screen format="linespecific">$ <userinput moreinfo="none">git --version</userinput>
git version 1.7.1</screen>
    </sect2>
    <sect2>
      <title>Setting Up a GitHub Account</title>
      <para>Next, <indexterm id="I_indexterm2_d1e1077" significance="normal"><primary>GitHub repository</primary><secondary>account for, setting up</secondary></indexterm>if you don’t already have one, you'll need to create a
      GitHub account. This is easy and (for your purposes, at least) free of
      charge. All the cool kids have one. Go to the <ulink url="https://github.com/plans">GitHub signup page</ulink> and choose the
      “Create a free account” option. You'll just need to provide a
      username, a password, and your email address (see <xref linkend="fig-github-signup"/>).</para>
      <figure float="0" id="fig-github-signup">
        <title>Signing up for a GitHub account</title>
        <mediaobject id="I_mediaobject2_d1e1091">
          <imageobject role="print">
            <imagedata fileref="figs/print/jtdg_0202.pdf" format="PDF"/>
          </imageobject>
          <imageobject role="web">
            <imagedata fileref="figs/web/jtdg_0202.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </figure>
    </sect2>
    <sect2>
      <title>Configuring SSH Keys</title>
      <para>GitHub <indexterm id="I_indexterm2_d1e1101" significance="normal"><primary>SSH keys</primary></indexterm>uses SSH keys to establish a secure connection channel between
      your computer and the GitHub servers. Setting these up is not hard, but
      involves a bit of work. Fortunately, there are clear and detailed
      instructions on the <ulink url="http://help.github.com/set-up-git-redirect">GitHub
      website</ulink>.</para>
    </sect2>
    <sect2 id="sect-git-fork">
      <title>Forking the Sample Repository</title>
      <para>As <indexterm class="startofrange" id="ch02-fork" significance="normal"><primary>GitHub repository</primary><secondary>forking</secondary></indexterm>we mentioned earlier, all the sample code for this book is
      stored on GitHub, at the following URL: <ulink url="https://github.com/wakaleo/game-of-life"/>. This is a public
      repository, so you can freely view the source code online and check out
      your own working copy. However, if you want to make changes, you'll
      need to create your own fork. A fork is a personal copy of a repository
      that you can use as you wish. To create a fork, login to your GitHub
      account and navigate to the <ulink role="orm:hideurl" url="https://github.com/wakaleo/game-of-life">repository URL</ulink>.
      Then, click on the Fork button (see <xref linkend="fig-github-fork"/>).
      This creates your own personal copy of the repository.</para>
      <para>Once <indexterm id="I_indexterm2_d1e1128" significance="normal"><primary>GitHub repository</primary><secondary>cloning a local copy of</secondary></indexterm>you've forked the repository, you should clone a local
      copy on your machine to make sure everything is set up correctly. Go to the command line
      and run the following command (replacing
      <replaceable>&lt;username&gt;</replaceable> with your own GitHub
      username):</para>
      <screen format="linespecific">$ <userinput moreinfo="none">git clone git@github.com:<replaceable>&lt;username&gt;</replaceable>/game-of-life.git</userinput></screen>
      <para>This “clones” (or checks out, in Subversion terms) a copy of
      the project onto your local drive:</para>
      <screen format="linespecific">git clone git@github.com:john-smart/game-of-life.git
Initialized empty Git repository in /Users/johnsmart/.../game-of-life/.git/
remote: Counting objects: 1783, done.
remote: Compressing objects: 100% (589/589), done.
remote: Total 1783 (delta 1116), reused 1783 (delta 1116)
Receiving objects: 100% (1783/1783), 14.83 MiB | 119 KiB/s, done.
Resolving deltas: 100% (1116/1116), done.</screen>
      <para>You should now have a local copy of the project that you can build
      and execute. You'll use this project later on to trigger changes
      in <indexterm id="I_indexterm2_d1e1150" class="endofrange" startref="ch02-fork" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e1152" class="endofrange" startref="ch02-env" significance="normal"><primary/></indexterm>the repository.</para>
      <figure float="none" id="fig-github-fork">
        <title>Forking the sample code repository</title>
        <mediaobject id="I_mediaobject2_d1e1158">
          <imageobject role="print">
            <imagedata fileref="figs/print/jtdg_0203.pdf" format="PDF"/>
          </imageobject>
          <imageobject role="web">
            <imagedata fileref="figs/web/jtdg_0203.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </figure>
    </sect2>
  </sect1>
  <sect1 id="sect-first-steps-starting">
    <title>Starting Up Jenkins</title>
    <para><indexterm class="startofrange" id="ch02-jws1" significance="normal"><primary>installation</primary><secondary>Jenkins</secondary><tertiary sortas="Java Web Start">with Java Web start</tertiary></indexterm><indexterm class="startofrange" id="ch02-jws2" significance="normal"><primary>Java Web Start</primary><secondary>installing and starting Jenkins using</secondary></indexterm><indexterm id="I_indexterm2_d1e1179" significance="normal"><primary>Jenkins</primary><secondary>running</secondary><tertiary sortas="Java Web Start">from Java Web Start</tertiary></indexterm>There are several ways to run Jenkins. One
    of the easiest ways to run Jenkins for the first time is to use Java Web
    Start. This is a way to start a Java
    application on your local machine via a URL on a web page.
    In your case, this starts a Jenkins server running
    on your machine.
    All you need for this to work is a recent (Java 6 or later)
    version of the Java Runtime Environment (JRE), which you installed in the
    previous section.</para>
    <para>For convenience, there's a link to the Jenkins Java Web Start
    instance on the <ulink url="http://www.wakaleo.com/books/jenkins-the-definitive-guide">book
    resources page</ulink>. Here you'll find a large orange Launch button in
    the Book Resources section (see <xref linkend="fig-hudson-webstart-page"/>). You can also find this link on the
    Meet Jenkins page on the <ulink url="http://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins">Jenkins
    website</ulink>, where, if you scroll down far enough, you should find a
    Test Drive section with an identical Launch button.</para>
    <figure float="none" id="fig-hudson-webstart-page">
      <title>Running Jenkins using Java Web Start from the book’s
      website</title>
      <mediaobject id="I_mediaobject2_d1e1200">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0304.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0304.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>When you click on the
    Launch button on either of these sites in Firefox, the browser asks if
    you want to open a file called <filename moreinfo="none">jenkins.jnlp</filename> using
    Java Web Start. Click on OK—this downloads Jenkins and starts it up on
    your machine (see <xref linkend="fig-first-steps-downloading-hudson"/>).</para>
    <figure float="none" id="fig-first-steps-downloading-hudson">
      <title>Java Web Start will download and run the latest version of
      Jenkins</title>
      <mediaobject id="I_mediaobject2_d1e1215">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0205.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0205.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>In other browsers, clicking on this button may simply download the
    JNLP file. In Internet Explorer, you may even need to right click on the
    link and select “Save Target As” to save the JNLP file, and then run it
    from Windows Explorer. However, in both of these cases, when you open the
    JNLP file, Java Web Start downloads and starts Jenkins.</para>
    <para>Java Web Start will only need to download a particular version of
    Jenkins once. From then on, when you click on the “Launch” button again,
    Java Web Start uses the copy of Jenkins it has already downloaded
    (that is, until the next version comes out). Ignore any messages your
    operating system or anti-virus software might produce—it's perfectly safe
    to run Jenkins on your local machine.</para>
    <para>Once Jenkins has finished downloading, Java Web Start starts up Jenkins on your
    machine. You can see it running in a small window
    called<indexterm id="I_indexterm2_d1e1226" significance="normal"><primary>Jenkins Console</primary></indexterm> “Jenkins Console” (see <xref linkend="fig-first-steps-console"/>). To stop <indexterm id="I_indexterm2_d1e1232" significance="normal"><primary>Jenkins</primary><secondary>stopping</secondary></indexterm>Jenkins at any time, just close this <indexterm id="I_indexterm2_d1e1238" class="endofrange" startref="ch02-jws1" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e1240" class="endofrange" startref="ch02-jws2" significance="normal"><primary/></indexterm>window.</para>
    <figure float="none" id="fig-first-steps-console">
      <title>Java Web Start running Jenkins</title>
      <mediaobject id="I_mediaobject2_d1e1246">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0206.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0206.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>There <indexterm id="I_indexterm2_d1e1253" significance="normal"><primary>installation</primary><secondary>Jenkins</secondary><tertiary sortas="WAR file">from WAR file</tertiary></indexterm><indexterm id="I_indexterm2_d1e1260" significance="normal"><primary>WAR file, installing Jenkins from</primary></indexterm><indexterm id="I_indexterm2_d1e1263" significance="normal"><primary>Jenkins</primary><secondary>installing</secondary><see>installation</see></indexterm>are also installers available for the principal operating
    systems available on the <ulink url="http://jenkins-ci.org">Jenkins
    website</ulink>. Or, if you're an experienced Java user versed in the
    ways of WAR files, you may prefer to simply download the latest version of
    Jenkins and run it from the command line. Jenkins comes in the form of an
    executable WAR file—you can download the most recent version from the
    Jenkins website <ulink url="http://http://jenkins-ci.org">home
    page</ulink>. For convenience, there's also a link to the latest version
    of Jenkins in the Resources section of this book’s <ulink url="http://www.wakaleo.com/books/jenkins-the-definitive-guide">website</ulink>.</para>
    <para>Once <indexterm id="I_indexterm2_d1e1283" significance="normal"><primary>Jenkins</primary><secondary>running</secondary><tertiary sortas="command line">from command line</tertiary></indexterm>downloaded, you can start Jenkins from the command line as
    shown here:</para>
    <screen format="linespecific">$ <userinput moreinfo="none">java -jar jenkins.war</userinput></screen>
    <para>Whether you've started Jenkins using Java Web Start or from the
    command line, Jenkins should now be running on your machine. By
    default, Jenkins will be listening on port 8080, so you can access Jenkins
    from your web <phrase role="keep-together">browser at</phrase> <ulink url="http://localhost:8080"/>.</para>
    <para>Alternatively, if you're familiar with Java application servers
    such as <indexterm id="I_indexterm2_d1e1304" significance="normal"><primary>Jenkins</primary><secondary>running</secondary><tertiary sortas="application">from application server</tertiary></indexterm><indexterm id="I_indexterm2_d1e1311" significance="normal"><primary>Tomcat application server</primary><secondary>deploying Jenkins using</secondary></indexterm><indexterm id="I_indexterm2_d1e1316" significance="normal"><primary>application server</primary><secondary>deploying Jenkins to</secondary></indexterm>Tomcat, you can simply deploy the Jenkins WAR file to your
    application server—with Tomcat, for example, you could simply place the
    <filename moreinfo="none">jenkins.war</filename> file in Tomcat’s
    <filename moreinfo="none">webapps</filename> directory. If you're running
    Jenkins on an application server, the URL that you use to access Jenkins
    will be slightly different. On a default Tomcat installation, for example,
    you can access Jenkins from your web browser at <ulink url="http://localhost:8080/jenkins"/>.</para>
    <para>When <indexterm id="I_indexterm2_d1e1332" significance="normal"><primary>Jenkins</primary><secondary>home page for</secondary></indexterm><indexterm id="I_indexterm2_d1e1337" significance="normal"><primary>home page</primary></indexterm><indexterm id="I_indexterm2_d1e1340" significance="normal"><primary>start page</primary><see>home page</see></indexterm>you open Jenkins in your browser, you should see a screen
    like the one shown in <xref linkend="fig-hudson-start" os=""/>. You're
    now ready to take your first steps with Jenkins!</para>
    <figure float="none" id="fig-hudson-start">
      <title>The Jenkins start page</title>
      <mediaobject id="I_mediaobject2_d1e1351">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0303.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0303.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
  </sect1>
  <sect1 id="sect-first-steps-configuring">
    <title>Configuring the Tools</title>
    <para>Before <indexterm class="startofrange" id="ch02-configure" significance="normal"><primary>configuration</primary></indexterm>you get started, you do need to do a little configuration.
    More precisely, you need to tell Jenkins about the build tools and JDK
    versions you'll be using for your builds.</para>
    <para>Click on the <indexterm id="I_indexterm2_d1e1367" significance="normal"><primary>Manage Jenkins screen</primary></indexterm>Manage Jenkins link on the home page (see <xref linkend="fig-hudson-start" os=""/>). This takes you to the Manage
    Jenkins page, the central one-stop-shop for all your Jenkins
    configuration needs. From this screen, you can configure your Jenkins server,
    install and upgrade plugins, keep track of system load, manage distributed
    build servers, and more! For now, however, we’ll keep it simple. Just
    click on the Configure System link at the top of the list (see <xref linkend="fig-hudson-manage"/>).</para>
    <figure float="none" id="fig-hudson-manage">
      <title>The Manage Jenkins screen</title>
      <mediaobject id="I_mediaobject2_d1e1378">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0401.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0401.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>This takes you to Jenkins’s main configuration screen (see <xref linkend="fig-hudson-configure"/>). From here you can configure everything
    from security configuration and build tools to email servers, version
    control systems, and integration with third-party software. The screen
    contains a lot of information, but most of the fields contain sensible
    default values, so you can safely ignore them for now.</para>
    <figure float="0" id="fig-hudson-configure">
      <title>The Configure Jenkins screen</title>
      <mediaobject id="I_mediaobject2_d1e1390">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0402.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0402.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>For now, you just need to configure the tools required to build
    your sample project. The application you'll be building is a Java
    application, built using Maven. So, in this case, all you need to do is to
    set up a recent JDK and Maven installation.</para>
    <para>However, before you start, take a look at the little blue question
    mark icons lined up on the right of the screen. These are<indexterm id="I_indexterm2_d1e1399" significance="normal"><primary>Jenkins</primary><secondary>help icons in</secondary></indexterm> Jenkins’s contextual help buttons. If you're curious about
    a particular field, click on the help icon next to it and Jenkins
    displays a very detailed description about what the field is and how it
    works.</para>
    <sect2>
      <title>Configuring Your Maven Setup</title>
      <para><indexterm class="startofrange" id="ch02-maven" significance="normal"><primary>Maven</primary><secondary>installing</secondary></indexterm><indexterm class="startofrange" id="ch02-maven2" significance="normal"><primary>configuration</primary><secondary>Maven</secondary></indexterm><indexterm class="startofrange" id="ch02-maven3" significance="normal"><primary>installation</primary><secondary>Maven</secondary></indexterm><indexterm class="startofrange" id="ch02-maven4" significance="normal"><primary>Maven</primary><secondary>configuring</secondary></indexterm>Our sample project uses Maven, so you need to install
      and configure Maven first. Jenkins provides great out-of-the-box support
      for Maven. Scroll down until you reach the Maven section in the
      Configure System screen (see <xref linkend="fig-hudson-maven"/>).</para>
      <para>Jenkins provides several options when it comes to configuring
      Maven. If you already have Maven installed on your machine, you can
      simply enter its path in the MAVEN_HOME field. Alternatively, you can
      install a Maven distribution by extracting a zip file located in a
      shared directory, or execute a home-rolled installation script. Or, you
      can let Jenkins do all the hard work and download Maven for you. To
      choose this option, just tick the Install automatically checkbox.
      Jenkins downloads and installs Maven from the Apache website the
      first time a build job needs it. Just choose the Maven version you want
      to install and Jenkins will do the rest. You'll also need to give a
      name to your Maven version (imaginatively called “Maven 2.2.1” in the
      example), so that you can refer to it in your build jobs.</para>
      <para>For this to work, you need to have an Internet connection. If you're
      behind a proxy, you’ll need to provide your proxy information—we
      discuss how to set this up in <xref linkend="sect-configuration-proxies"/>.</para>
      <figure float="0" id="fig-hudson-maven">
        <title>Configuring a Maven installation</title>
        <mediaobject id="I_mediaobject2_d1e1441">
          <imageobject role="print">
            <imagedata fileref="figs/print/jtdg_0210.pdf" format="PDF"/>
          </imageobject>
          <imageobject role="web">
            <imagedata fileref="figs/web/jtdg_0210.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </figure>
      <para>One of the nice things about the Jenkins Maven installation
      process is how well it <phrase role="keep-together">works</phrase> with
      remote build agents. Later on in the book, you’ll see how Jenkins can
      also run builds on remote build servers. You can define a standard way
      of installing Maven for all of your build servers (downloading from the
      Internet, unzipping a distribution bundle on a shared server, etc.)—all
      of these options work when you add a new remote build agent or set
      up a new build server using this Jenkins <indexterm id="I_indexterm2_d1e1451" class="endofrange" startref="ch02-maven" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e1453" class="endofrange" startref="ch02-maven2" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e1455" class="endofrange" startref="ch02-maven3" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e1457" class="endofrange" startref="ch02-maven4" significance="normal"><primary/></indexterm>configuration.</para>
    </sect2>
    <sect2>
      <title>Configuring the JDK</title>
      <para><indexterm id="I_indexterm2_d1e1464" significance="normal"><primary>JDK (Java Development Kit)</primary><secondary>configuring</secondary></indexterm><indexterm id="I_indexterm2_d1e1469" significance="normal"><primary>configuration</primary><secondary>JDK</secondary></indexterm>Once you've configured your Maven installation, you'll
      also need to configure your Java environment (see <xref linkend="fig-hudson-jdk"/>). Again, if you have a Java Development Kit (as opposed
      to a Java Runtime Environment—the JDK contains extra development tools
      such as the Java compiler) already installed on your machine, you
      can simply provide the path to your JDK in the JAVA_HOME field.
      Otherwise, you can ask Jenkins to download the JDK from the <ulink url="http://www.oracle.com/technetwork/java/index.html">Oracle
      website</ulink> the first time a build job requires it. This is similar
      to the automatic Maven installation feature—just pick the JDK version
      you need and Jenkins takes care of all the logistics. However, for
      licensing reasons, you'll also need to tick a checkbox to indicate
      that you agree with the Java SDK License Agreement.</para>
      <figure float="0" id="fig-hudson-jdk">
        <title>Configuring a JDK installation</title>
        <mediaobject id="I_mediaobject2_d1e1483">
          <imageobject role="print">
            <imagedata fileref="figs/print/jtdg_0211.pdf" format="PDF"/>
          </imageobject>
          <imageobject role="web">
            <imagedata fileref="figs/web/jtdg_0211.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </figure>
      <para>Now, go to the bottom of the screen and click on the Save
      button.</para>
    </sect2>
    <sect2>
      <title>Notification</title>
      <para>Another<indexterm id="I_indexterm2_d1e1495" significance="normal"><primary>notifications</primary><secondary>configuring</secondary></indexterm><indexterm id="I_indexterm2_d1e1500" significance="normal"><primary>configuration</primary><secondary>notifications</secondary></indexterm><indexterm id="I_indexterm2_d1e1505" significance="normal"><primary>email notifications</primary><seealso>notifications</seealso></indexterm> important aspect you'd typically set up is
      notification. When a Jenkins build breaks, and when it works again, Jenkins
      can send out email messages to the team to spread the word. Using
      plugins, you can also get it to send instant messages or SMS messages,
      post entries on Twitter, or notify people in a few other ways. It
      all depends on what works best for your organizational culture. Email
      notification is easy enough to set up if you know your local SMTP server
      address—just provide this value in the Email Notification section
      towards the bottom of the main configuration page. However, to keep
      things simple, we’re not going to worry about notifications just
      yet.</para>
    </sect2>
    <sect2>
      <title>Setting Up Git</title>
      <para>The <indexterm class="startofrange" id="ch02-git" significance="normal"><primary>Git plugin</primary></indexterm><indexterm class="startofrange" id="ch02-git2" significance="normal"><primary>configuration</primary><secondary>Git</secondary></indexterm><indexterm class="startofrange" id="ch02-git3" significance="normal"><primary>plugins</primary><secondary>Git</secondary></indexterm>last thing you need to configure for this demo is getting
      Jenkins working with Git. Jenkins comes with support for <indexterm id="I_indexterm2_d1e1531" significance="normal"><primary>Subversion</primary><secondary>Jenkins supporting</secondary></indexterm><indexterm id="I_indexterm2_d1e1536" significance="normal"><primary>Jenkins</primary><secondary>version control systems supported by</secondary></indexterm>Subversion and <indexterm id="I_indexterm2_d1e1542" significance="normal"><primary>CVS</primary><secondary>Jenkins supporting</secondary></indexterm><indexterm id="I_indexterm2_d1e1547" significance="normal"><primary>Jenkins</primary><secondary>CVS supported by</secondary></indexterm>CVS out of the box, but you'll need to install the
      Jenkins Git plugin to be able to complete the rest of this tutorial.
      Don’t worry, the process is pretty simple. First of all, click on the
      Manage Jenkins link to the left of the screen to go back to the main
      configuration screen (see <xref linkend="fig-hudson-manage"/>). Then,
      click on Manage Plugins. This opens the plugin configuration screen,
      which is where you manage the extra features you want to install on your
      Jenkins server. You should see four tabs: Updates, Available, Installed,
      and Advanced (see <xref linkend="fig-jenkins-plugin-manager-installed"/>).</para>
      <figure float="0" id="fig-jenkins-plugin-manager-installed">
        <title>Managing plugins in Jenkins</title>
        <mediaobject id="I_mediaobject2_d1e1561">
          <imageobject role="print">
            <imagedata fileref="figs/print/jtdg_0212.pdf" format="PDF"/>
          </imageobject>
          <imageobject role="web">
            <imagedata fileref="figs/web/jtdg_0212.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </figure>
      <para>For now, just click on the Available tab. Here you'll see a very
      long list of available plugins. Find the Git Plugin entry in this list
      and tick the corresponding checkbox (see <xref linkend="fig-jenkins-installing-git"/>), and then scroll down to the
      bottom of the screen and click on Install. This downloads and
      installs the Jenkins Git plugin into your local Jenkins instance.</para>
      <figure float="0" id="fig-jenkins-installing-git">
        <title>Installing the Git plugin</title>
        <mediaobject id="I_mediaobject2_d1e1573">
          <imageobject role="print">
            <imagedata fileref="figs/print/jtdg_0213.pdf" format="PDF"/>
          </imageobject>
          <imageobject role="web">
            <imagedata fileref="figs/web/jtdg_0213.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </figure>
      <para>Once it's done, restart Jenkins for the changes
      to take effect. To do this, you can simply click on the “Restart Jenkins
      when no jobs are running” button displayed on the installation screen,
      or alternatively, shut down and restart Jenkins by hand.</para>
      <para>That's all you need to configure at this stage. You're now ready
      to set up your first Jenkins build <indexterm id="I_indexterm2_d1e1582" class="endofrange" startref="ch02-configure" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e1584" class="endofrange" startref="ch02-git" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e1586" class="endofrange" startref="ch02-git2" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e1588" class="endofrange" startref="ch02-git3" significance="normal"><primary/></indexterm>job!</para>
    </sect2>
  </sect1>
  <sect1 id="sect-first-steps-first-job">
    <title>Your First Jenkins Build Job</title>
    <para>Build jobs<indexterm class="startofrange" id="ch02-jobcreate" significance="normal"><primary>build jobs</primary><secondary>creating</secondary></indexterm> are at the heart of the Jenkins build process. Simply put,
    you can think of a Jenkins build job as a particular task or step in your
    build process. This may involve simply compiling your source code and
    running your unit tests. Or, you might want a build job to do other related
    tasks, such as running your integration tests, measuring code coverage or
    code quality metrics, generating technical documentation, or even
    deploying your application to a web server. A real project usually
    requires many separate but related build jobs.</para>
    <para>Our sample application is a simple Java implementation of John
    Conway’s <indexterm class="startofrange" id="ch02-game" significance="normal"><primary>Game of Life example application</primary></indexterm>“Game of Life.”<footnote id="footnote-game-of-life"><para>See <ulink url="http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life"/>.</para></footnote> The Game of Life is a mathematical game which takes place on
    a two dimensional grid of cells, which we'll refer to as the Universe.
    Each cell can be either alive or dead. Cells interact with their direct
    neighbors to determine whether they live or die in the next
    generation of cells. For each new generation of cells, the following rules
    apply:</para>
    <itemizedlist>
      <listitem>
        <para>Any live cell with fewer than two live neighbors dies of
        underpopulation.</para>
      </listitem>
      <listitem>
        <para>Any live cell with more than three live neighbors dies of
        overcrowding.</para>
      </listitem>
      <listitem>
        <para>Any live cell with two or three live neighbors lives on to the
        next generation.</para>
      </listitem>
      <listitem>
        <para>Any dead cell with exactly three live neighbors becomes a live
        cell.</para>
      </listitem>
    </itemizedlist>
    <para>Our application is a Java module, built using Maven, that implements
    the core logic of the Game of Life. You’ll worry about the user
    interfaces later on. For now, let’s see how you can automate this build in
    Jenkins. If you're not familiar with Maven, or prefer Ant or another
    build framework—don’t worry! The examples don’t require much knowledge of
    Maven, and we’ll be looking at plenty of examples of using other build
    tools later on in the book.</para>
    <para>For your first build job, we'll keep it simple: you're just going
    to compile and test your sample application. Click on the New Job link. You
    should get to a screen similar to <xref linkend="fig-first-build-job"/>.
    Jenkins supports several different types of <indexterm id="I_indexterm2_d1e1633" significance="normal"><primary>build jobs</primary><secondary>types of</secondary></indexterm>build jobs. The two most commonly-used are the freestyle
    builds and the Maven 2/3 builds. The <indexterm id="I_indexterm2_d1e1639" significance="normal"><primary>freestyle build jobs</primary></indexterm>freestyle projects allow you to configure just about any
    sort of build job: they're highly flexible and very configurable. The
    <indexterm id="I_indexterm2_d1e1643" significance="normal"><primary>Maven build jobs</primary></indexterm>Maven 2/3 builds understand the Maven project structure, and
    can use this to let you set up Maven build jobs with less effort and a few
    extra features. There are also plugins that provide support for other
    types of build jobs. Nevertheless, although your project does use Maven, you're
    going to use a<indexterm class="startofrange" id="ch02-freecreate" significance="normal"><primary>freestyle build jobs</primary><secondary>creating</secondary></indexterm> freestyle build job, just to keep things simple and general
    to start with. So, choose “Build a freestyle software project”, as shown in
    <xref linkend="fig-first-build-job"/>.</para>
    <para>You’ll <indexterm id="I_indexterm2_d1e1658" significance="normal"><primary>build jobs</primary><secondary>naming</secondary></indexterm>also need to give your build job a sensible name. In this
    case, call it <emphasis>game-of-life-default</emphasis>, as it will be the
    default CI build for your Game of Life project.</para>
    <figure float="0" id="fig-first-build-job">
      <title>Setting up your first build job in Jenkins</title>
      <mediaobject id="I_mediaobject2_d1e1670">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0214.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0214.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Once you click on OK, Jenkins displays the project configuration
    screen (see <phrase role="keep-together"><xref linkend="fig-jenkins-git-new-project"/></phrase>).</para>
    <para>In a nutshell, Jenkins works by checking out the source code of your
    project and building it in its own workspace. So, the next thing you need
    to do is to tell Jenkins where it can find the <indexterm id="I_indexterm2_d1e1682" significance="normal"><primary>build jobs</primary><secondary>source code location for</secondary></indexterm>source code for your project. You do this in the<indexterm id="I_indexterm2_d1e1688" significance="normal"><primary>version control systems</primary><secondary>configuring</secondary></indexterm> Source Code Management <indexterm id="I_indexterm2_d1e1694" significance="normal"><primary>Source Code Management</primary><see>SCM; version control systems</see></indexterm><indexterm id="I_indexterm2_d1e1699" significance="normal"><primary>SCM (Source Code Management)</primary><seealso>version control systems</seealso></indexterm>section (see <xref linkend="fig-jenkins-git-new-project"/>). Jenkins<indexterm id="I_indexterm2_d1e1707" significance="normal"><primary>Jenkins</primary><secondary>version control systems supported by</secondary></indexterm> provides support for CVS and Subversion out of the box, and
    many others such as Git, Mercurial, ClearCase, Perforce, and many more via
    plugins.</para>
    <para>For this project, you'll be getting the source code from the GitHub
    repository you set up earlier. On the Jenkins screen, choose “Git” and
    enter the Repository URL you defined in <xref linkend="sect-git-fork"/>
    (see <xref linkend="fig-jenkins-git-new-project"/>). Make sure this is
    the URL of your fork, and not of the original repository: it should have
    the form
    <emphasis>git@github.com:<replaceable>&lt;username&gt;</replaceable>/game-of-life.git</emphasis>,
    where <replaceable>&lt;username&gt;</replaceable> is the username for your
    own GitHub account. You can leave all of the other options up until here
    with their default values.</para>
    <figure float="0" id="fig-jenkins-git-new-project">
      <title>Telling Jenkins where to find the source code</title>
      <mediaobject id="I_mediaobject2_d1e1732">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0215.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0215.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Once<indexterm id="I_indexterm2_d1e1739" significance="normal"><primary>build jobs</primary><secondary>scheduling</secondary><see>build triggers</see></indexterm><indexterm class="startofrange" id="ch02-trigger2" significance="normal"><primary>build triggers</primary><secondary>configuring</secondary></indexterm> you've told Jenkins where to find the source code for your
    application, you need to tell it how often it should check for updates. You
    want Jenkins to monitor the <phrase role="keep-together">repository</phrase> and start a build whenever any
    changes have been committed. This is a common way to set up a build job in
    a CI context, as it provides fast feedback if the
    build fails. Other approaches include building on regular intervals (for
    example, once a day), requiring a user to kick off the build manually, or
    even triggering a build remotely using a “post-commit” hook in your
    SCM.</para>
    <para>You configure all of this in the Build Triggers section (see <xref linkend="fig-new-job-triggers"/>). Pick the Poll SCM option and enter “*
    * * * *” (that’s five asterisks separated by spaces) in the Schedule box.
    Jenkins schedules are configured using <literal moreinfo="none">cron</literal> syntax,
    well-known in the Unix world. The <literal moreinfo="none">cron</literal> syntax consists
    of five fields separated by white space, indicating respectively <phrase role="keep-together">the</phrase> minute (0–59), hour (0–23), day of the
    month (1–31), month (1–12), and the day of the week (0–7, with 0 and 7
    being Sunday). The star is a wildcard character which represents any valid
    value for that field. So, five stars means “every minute of every
    hour of every day”. You can also provide ranges of values: “* 9-17 * * *”
    would mean “every minute of every day, between 9am and 5pm”. You can also
    space out the schedule using intervals: for example “*/5 * * * *” means “every 5
    minutes”. Finally, there are other convenient
    short-hands, such as “@daily” and “@hourly”.</para>
    <para>Don’t worry if your Unix skills are a little rusty—if you click on
    the blue question mark icon on the right side of the schedule box, Jenkins
    brings up a very complete <indexterm id="I_indexterm2_d1e1770" class="endofrange" startref="ch02-trigger2" significance="normal"><primary/></indexterm>refresher.</para>
    <figure float="0" id="fig-new-job-triggers">
      <title>Scheduling the build jobs</title>
      <mediaobject id="I_mediaobject2_d1e1776">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0216.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0216.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>The<indexterm class="startofrange" id="ch02-stepadd" significance="normal"><primary>build jobs</primary><secondary>steps in, adding</secondary></indexterm> next step is to configure the actual build itself. In a
    freestyle build job, you can break down your build job into a number of
    build steps. This makes it easier to organize builds in clean separate
    stages. For example, a build might run a suite of functional tests in one
    step, and then tag the build in a second step if all of the functional
    tests succeed. In technical terms, a build step might involve invoking an
    Ant task or a Maven target, or running a shell script. There are also
    Jenkins plugins that let you use additional types of build steps: Gant,
    Grails, Gradle, Rake, Ruby, MSBuild, and many other build tools are all
    supported.</para>
    <para><indexterm id="I_indexterm2_d1e1790" significance="normal"><primary>Maven</primary><secondary sortas="build steps">build steps in freestyle build
        jobs</secondary></indexterm><indexterm id="I_indexterm2_d1e1795" significance="normal"><primary>freestyle build jobs</primary><secondary>build steps in</secondary><tertiary>Maven build steps</tertiary></indexterm>For now, you just want to run a simple Maven build. Scroll
    down to the Build section and click on the “Add build step” and choose
    “Invoke top-level Maven targets” (see <xref linkend="fig-new-job-build-step"/>). Then, enter “clean package” in the
    Goals field. If you're not familiar with Maven, this deletes any
    previous build artifacts, compiles your code, runs your unit tests, and
    generates a JAR file.</para>
    <figure float="none" id="fig-new-job-build-step">
      <title>Adding a build step</title>
      <mediaobject id="I_mediaobject2_d1e1808">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0217.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0217.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>By default, this build job fails if the code doesn't compile or
    if any of the unit tests fail. That’s the most fundamental thing that
    you’d expect of any build server. But, <phrase role="keep-together">Jenkins</phrase> also does a great job of helping you
    display your test results and test result trends.</para>
    <para>The<indexterm id="I_indexterm2_d1e1820" significance="normal"><primary>build jobs</primary><secondary>reports resulting from</secondary><see>reporting</see></indexterm><indexterm id="I_indexterm2_d1e1827" significance="normal"><primary>reporting</primary><secondary>test results</secondary><tertiary>JUnit reports</tertiary></indexterm><indexterm id="I_indexterm2_d1e1834" significance="normal"><primary>tests</primary><secondary>reports from</secondary><tertiary>JUnit reports</tertiary></indexterm> de facto standard for test reporting in the Java world is
    the <indexterm id="I_indexterm2_d1e1842" significance="normal"><primary>XML format for test reports</primary><see>JUnit reports</see></indexterm>XML format used by JUnit.<indexterm id="I_indexterm2_d1e1848" significance="normal"><primary>JUnit reports</primary><secondary>format for</secondary></indexterm> This format is also used by many other Java testing tools,
    such as TestNG, Spock, and Easyb. Jenkins understands this format, so if
    your build produces JUnit XML test results, Jenkins can generate nice
    graphical test reports and statistics on test results over time, and also
    let you view the details of any test failures. Jenkins also keeps track of
    how long your tests take to run, both globally, and per test—this can come
    in handy if you need to track down performance issues.</para>
    <para>So, the next thing you need to do is to get Jenkins to keep tabs on
    your unit tests.</para>
    <para><indexterm id="I_indexterm2_d1e1858" significance="normal"><primary>JUnit reports</primary><secondary>configuring in freestyle build job</secondary></indexterm>Go to the Post-build Actions section (see <xref linkend="fig-new-job-test-reports"/>) and tick the “Publish JUnit test result
    report” checkbox. When Maven runs unit tests in a project, it
    automatically generates the XML test reports in a directory called
    <filename moreinfo="none">surefire-reports</filename> in the <filename moreinfo="none">target</filename> directory. So, enter
    “**/target/surefire-reports/*.xml” in the “Test report XMLs” field. The
    two asterisks at the start of the path (“**”) are a best practice to make
    the configuration a bit more robust: they allow Jenkins to find the target
    directory no matter how you've configured Jenkins to check out the source
    code.</para>
    <para>Another<indexterm id="I_indexterm2_d1e1874" significance="normal"><primary>build jobs</primary><secondary>binary artifacts from</secondary><see>binary artifacts</see></indexterm><indexterm id="I_indexterm2_d1e1881" significance="normal"><primary>archives of binary artifacts</primary></indexterm><indexterm id="I_indexterm2_d1e1884" significance="normal"><primary>binary artifacts</primary><secondary>archiving</secondary></indexterm> thing you often want to do is to archive your build
    results. Jenkins can store a copy of the binary artifacts generated by
    your build, allowing you to download the binaries produced by a build
    directly from the build results page. It also posts the latest binary
    artifacts on the project home page, which is a convenient way to
    distribute the latest and greatest version of your application. You can
    activate this option by ticking the “Archive the artifacts” checkbox and
    indicating which binary artifacts you want Jenkins to archive. In <xref linkend="fig-new-job-test-reports"/>, for example, you've configured
    Jenkins to store all of the JAR files generated by this <indexterm id="I_indexterm2_d1e1892" class="endofrange" startref="ch02-jobcreate" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e1894" class="endofrange" startref="ch02-stepadd" significance="normal"><primary/></indexterm>build job.</para>
    <figure float="0" id="fig-new-job-test-reports">
      <title>Configuring JUnit test reports and artifact archiving</title>
      <mediaobject id="I_mediaobject2_d1e1900">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0218.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0218.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Now you’re done—just click on the Save button at the bottom of the
    screen. Your build job <indexterm id="I_indexterm2_d1e1907" class="endofrange" startref="ch02-freecreate" significance="normal"><primary/></indexterm>should now be ready to run. So, let’s see it in
    action!</para>
  </sect1>
  <sect1 id="sect-first-steps-first-job-in-action">
    <title>Your First Build Job in Action</title>
    <para>Once you save your new build job, Jenkins displays the home page
    for this job (see <xref linkend="fig-new-job-running"/>). This is where
    Jenkins displays details about the latest build results and the build
    history.</para>
    <para>If <indexterm id="I_indexterm2_d1e1919" significance="normal"><primary>build jobs</primary><secondary>status of, while running</secondary></indexterm>you wait a minute or so, the build should kick off
    automatically—you can see the stripy progress bar in the Build History
    section in the bottom left hand corner of <xref linkend="fig-new-job-running"/>. Or, <indexterm id="I_indexterm2_d1e1927" significance="normal"><primary>build jobs</primary><secondary>triggering manually</secondary></indexterm><indexterm id="I_indexterm2_d1e1932" significance="normal"><primary>build triggers</primary><secondary>manual</secondary></indexterm>if you're impatient, you can also trigger the build
    manually using the Build Now button.</para>
    <figure float="0" id="fig-new-job-running">
      <title>Your first build job running</title>
      <mediaobject id="I_mediaobject2_d1e1941">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0219.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0219.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>The<indexterm id="I_indexterm2_d1e1948" significance="normal"><primary>build history</primary><secondary>results summary for</secondary></indexterm><indexterm id="I_indexterm2_d1e1953" significance="normal"><primary>build jobs</primary><secondary>history of</secondary><see>build history</see></indexterm> build will also now figure proudly on your Jenkins server’s
    home page (see <xref linkend="fig-hudson-dashboard"/>). This page shows a
    summary of all of your build jobs, including the current build status and
    general state of heath of each of your builds. It tells you when each
    build ran successfully for the last time, when it last failed, and
    also the results of the last build.</para>
    <para>One of Jenkins’s specialities is the way it lets you get an idea of
    build behavior over time. For example, Jenkins uses a weather metaphor to
    help give you an idea of the stability of your builds. Essentially, the
    more your builds fail, the worse the weather gets. This helps you get an
    idea of whether a particular broken build is an isolated event, or if the
    build is breaking on a regular basis, in which case it might need some
    special attention.</para>
    <para>You can also manually<indexterm id="I_indexterm2_d1e1967" significance="normal"><primary>build jobs</primary><secondary>triggering manually</secondary></indexterm><indexterm id="I_indexterm2_d1e1972" significance="normal"><primary>build triggers</primary><secondary>manual</secondary></indexterm> trigger a build job here, using the build schedule button
    (that’s the one that looks a bit like a green play button on top of a
    clock).</para>
    <figure float="0" id="fig-hudson-dashboard">
      <title>The Jenkins dashboard</title>
      <mediaobject id="I_mediaobject2_d1e1981">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0220.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0220.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>When<indexterm id="I_indexterm2_d1e1988" significance="normal"><primary>build jobs</primary><secondary>success of, indicator for</secondary></indexterm> the build finishes, the ball in the Build History box
    becomes solid blue. This means the build was a success. Build <indexterm id="I_indexterm2_d1e1994" significance="normal"><primary>build jobs</primary><secondary>failed</secondary><tertiary>indicator for</tertiary></indexterm>failures are generally indicated by a red ball. For some
    types of projects, you can also distinguish between a build error (such as
    a compiler error), indicated by a red ball, and other sorts of build
    failures, such as unit test failures or insufficient code coverage, which
    are indicated by a yellow ball. There are also some other details about
    the latest test results, when the last build was run, and so on. But,
    before you look at the details, let’s get back to the core business model
    of a CI server—kicking off builds when someone changes
    the code!</para>
    <para>You're<indexterm class="startofrange" id="ch02-failure" significance="normal"><primary>build jobs</primary><secondary>failed</secondary><tertiary>example of</tertiary></indexterm> going to commit a code change to GitHub and see what
    happens, using the source code you checked out in <xref linkend="sect-git-fork"/>. You've now Jenkins configured to monitor your
    GitHub fork, so if you make any changes, Jenkins should be able to pick
    them up.</para>
    <para>So, let’s make a change. The idea is to introduce a code change that
    causes the unit tests to fail. If your Java is a bit rusty, don’t
    worry. You won’t need to know any Java to be able to break the build—just
    follow the instructions!</para>
    <para>In normal development, you'd first modify the unit test that
    describes this behaviour. Then, you'd verify that the test fails with
    the existing code, and implement the code to ensure that the test passes.
    <emphasis>Then</emphasis> you'd commit your changes to your version
    control system, allowing Jenkins to build them. However, this would be a
    poor demonstration of how Jenkins handles unit test failures. So, in this
    example, you'll, against all best practices, simply modify the
    application code directly.</para>
    <para>First of all, open the <filename moreinfo="none">Cell.java</filename> file, which you'll find in the
    <filename moreinfo="none">gameoflife-core/src/main/java/com/wakaleo/gameoflife/domain</filename>
    directory. Open this file in your favorite text editor. You should see
    something like this:</para>
    <programlisting id="I_programlisting2_d1e2030" format="linespecific">package com.wakaleo.gameoflife.domain;

public enum Cell {
    LIVE_CELL("*"), DEAD_CELL(".");

    private String symbol;

    private Cell(String symbol) {
        this.symbol = symbol;
    }

    @Override
    public String toString() {
        return symbol;
    }

    static Cell fromSymbol(String symbol) {
        Cell cellRepresentedBySymbol = null;
        for (Cell cell : Cell.values()) {
            if (cell.symbol.equals(symbol)) {
                cellRepresentedBySymbol = cell;
                break;
            }
        }
        return cellRepresentedBySymbol;
    }

    public String getSymbol() {
        return symbol;
    }
}</programlisting>
    <para>The application can print the state of the grid as a text array.
    Currently, the application prints your live cells as an asterisk
    (<literal moreinfo="none">*</literal>), and dead cells appear as a minus character
    (<literal moreinfo="none">–</literal>). So, a three-by-five grid containing a single living
    cell in the center would look like this:</para>
    <screen format="linespecific">-----
--*--
-----</screen>
    <para>Now, users have asked for a change to the application—they want
    pluses (<literal moreinfo="none">+</literal>) instead of stars! So, you're going to make a
    slight change to the <code>Cell</code> class method, and rewrite it as
    follows (the modifications are in <userinput moreinfo="none">bold</userinput>):</para>
    <programlisting id="I_programlisting2_d1e2053" format="linespecific">package com.wakaleo.gameoflife.domain;

public enum Cell {
    <userinput moreinfo="none">LIVE_CELL("+")</userinput>, DEAD_CELL(".");

    private String symbol;

    private Cell(String symbol) {
        this.symbol = symbol;
    }

    @Override
    public String toString() {
        return symbol;
    }

    static Cell fromSymbol(String symbol) {
        Cell cellRepresentedBySymbol = null;
        for (Cell cell : Cell.values()) {
            if (cell.symbol.equals(symbol)) {
                cellRepresentedBySymbol = cell;
                break;
            }
        }
        return cellRepresentedBySymbol;
    }

    public String getSymbol() {
        return symbol;
    }
}</programlisting>
    <para>Save these changes, and then commit them to the local Git repository
    by running <literal moreinfo="none">git commit</literal>:</para>
    <screen format="linespecific">$ <userinput moreinfo="none">git commit -a -m "Changes stars to pluses"</userinput>
[master 61ce946] Changes stars to pluses
 1 files changed, 1 insertions(+), 1 deletions(-)</screen>
    <para>This commits the changes locally, but since Git is a distributed
    repository, you now have to push them through to your fork on
    GitHub. You do this by running <literal moreinfo="none">git push</literal>:</para>
    <screen format="linespecific">$ <userinput moreinfo="none">git push</userinput>
Counting objects: 21, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (7/7), done.
Writing objects: 100% (11/11), 754 bytes, done.
Total 11 (delta 4), reused 0 (delta 0)
To git@github.com:john-smart/game-of-life.git
   7882d5c..61ce946  master -&gt; master</screen>
    <para>Now, go back to the Jenkins web page. After a minute or so, a new
    build should kick off, and fail. In fact, there are several other places
    which are affected by this change, and the regression tests related to
    these features are now failing. On the build job home page, you'll see a
    second build in the <indexterm id="I_indexterm2_d1e2081" significance="normal"><primary>build jobs</primary><secondary>failed</secondary><tertiary>indicator for</tertiary></indexterm>build history with an ominous red ball (see <xref linkend="fig-new-job-failed"/>)—this tells you that the latest build has
    failed.</para>
    <para>You <indexterm id="I_indexterm2_d1e2093" significance="normal"><primary>build history</primary><secondary>results summary for</secondary></indexterm>might also notice some clouds next to the Build History
    title—this is the same “weather” icon that you saw on the home page, and
    serves the same purpose—to give you a general idea of how stable your
    build is over time.</para>
    <figure float="none" id="fig-new-job-failed">
      <title>A failed build</title>
      <mediaobject id="I_mediaobject2_d1e2102">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0221.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0221.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>If <indexterm class="startofrange" id="ch02-details" significance="normal"><primary>build history</primary><secondary>details regarding</secondary></indexterm><indexterm class="startofrange" id="ch02-details2" significance="normal"><primary>reporting</primary><secondary>test results</secondary></indexterm><indexterm class="startofrange" id="ch02-details3" significance="normal"><primary>tests</primary><secondary>reports from</secondary></indexterm>you click on the new build history entry, Jenkins gives
    you some more details about what went wrong (see <xref linkend="fig-new-job-failure-details"/>). Jenkins tells you that there
    were 11 new test failures in this build, something which can be seen at a
    glance in the <indexterm id="I_indexterm2_d1e2127" significance="normal"><primary>Test Result Trend graph</primary></indexterm>Test Result Trend graph—red indicates test failures. You can
    even see which tests are failing, and how long they've been
    broken.</para>
    <figure float="none" id="fig-new-job-failure-details">
      <title>The list of all the broken tests</title>
      <mediaobject id="I_mediaobject2_d1e2134">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0222.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0222.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>If you want to know exactly what went wrong, that’s easy enough to
    figure out as well. If you click on the failed test classes, Jenkins
    brings up the actual details of the test failures (see <xref linkend="fig-hudson-new-job-test-failure-details"/>), which is a great
    help when it comes to reproducing and fixing the issue.</para>
    <figure float="none" id="fig-hudson-new-job-test-failure-details">
      <title>Details about a failed test</title>
      <mediaobject id="I_mediaobject2_d1e2146">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0223.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0223.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <?dbfo-need height=”1in”?>
    <para>Jenkins displays a host of information about the failed test in a
    very readable form, including the error message the test produced, the
    stack trace, how long the test has been broken, and how long it took to
    run. Often, this in itself is enough to put a developer on the right track
    towards<indexterm id="I_indexterm2_d1e2154" class="endofrange" startref="ch02-failure" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e2156" class="endofrange" startref="ch02-details" significance="normal"><primary/></indexterm> fixing<indexterm id="I_indexterm2_d1e2159" class="endofrange" startref="ch02-details2" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e2161" class="endofrange" startref="ch02-details3" significance="normal"><primary/></indexterm> the issue.</para>
    <para>Now let’s fix the build. To make things simple, just back out
    your changes and recommit the code in its original state (the end users
    just changed their mind about the asterisks, anyway). So, just undo the
    changes you made to the <literal moreinfo="none">Cell</literal> class (again, the changes
    are highlighted in <userinput moreinfo="none">bold</userinput>):</para>
    <programlisting id="I_programlisting2_d1e2172" format="linespecific">package com.wakaleo.gameoflife.domain;

public enum Cell {
    <userinput moreinfo="none">LIVE_CELL("*")</userinput>, DEAD_CELL(".");

    private String symbol;

    private Cell(String symbol) {
        this.symbol = symbol;
    }

    @Override
    public String toString() {
        return symbol;
    }

    static Cell fromSymbol(String symbol) {
        Cell cellRepresentedBySymbol = null;
        for (Cell cell : Cell.values()) {
            if (cell.symbol.equals(symbol)) {
                cellRepresentedBySymbol = cell;
                break;
            }
        }
        return cellRepresentedBySymbol;
    }

    public String getSymbol() {
        return symbol;
    }
}</programlisting>
    <para>When you’ve done this, commit your changes again:</para>
    <screen format="linespecific">$ <userinput moreinfo="none">git commit -a -m "Restored the star"</userinput>
[master bc924be] Restored the star
 1 files changed, 1 insertions(+), 1 deletions(-)
$ <userinput moreinfo="none">git push</userinput>
Counting objects: 21, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (7/7), done.
Writing objects: 100% (11/11), 752 bytes, done.
Total 11 (delta 4), reused 6 (delta 0)
To git@github.com:john-smart/game-of-life.git
   61ce946..bc924be  master -&gt; master</screen>
    <para>Once you’ve committed these changes, Jenkins should pick them up and
    kick off a build. When this is done, you'll be able to see the fruit of
    your work on the build job home page (see <xref linkend="fig-new-job-fixed-build"/>)—the build status is blue again and
    all is well. Also, notice the way you're building up a trend graph showing
    the number of succeeding unit tests over time—this sort of report really
    is one of Jenkins’s strong points.</para>
    <figure float="none" id="fig-new-job-fixed-build">
      <title>Now the build is back to normal</title>
      <mediaobject id="I_mediaobject2_d1e2195">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0224.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0224.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
  </sect1>
  <sect1 id="sect-first-steps-javadocs">
    <title>More Reporting—Displaying Javadocs</title>
    <para><indexterm class="startofrange" id="ch02-javadoc" significance="normal"><primary>Javadocs</primary></indexterm><indexterm id="I_indexterm2_d1e2207" significance="normal"><primary>build jobs</primary><secondary>steps in, adding</secondary></indexterm><indexterm class="startofrange" id="ch02-javadoc2" significance="normal"><primary>build jobs</primary><secondary>Javadocs generation in</secondary></indexterm><indexterm id="I_indexterm2_d1e2217" significance="normal"><primary>documentation</primary><see>Javadocs</see></indexterm><indexterm class="startofrange" id="ch02-javadoc3" significance="normal"><primary>reporting</primary><secondary>Javadocs API documentation</secondary></indexterm>For many Java projects, Javadoc comments are an important
    source of low-level technical documentation. There are even tools, such as
    UmlGraph, that produce Javadoc with embedded UML diagrams to give
    you a better picture of how the classes fit together in the application.
    This sort of technical documentation has the advantage of being cheap to
    produce, accurate, and always up-to-date.</para>
    <para>Jenkins can integrate Javadoc API documentation directly into the
    Jenkins website. This way, everyone can find the latest Javadoc easily, in
    a well known place. Often, this sort of task is performed in a separate
    build job, but, for simplicity, you're going to add another build step to
    the <emphasis>gameoflife-default</emphasis> build job to generate and
    display Javadoc documention for the Game of Life API.</para>
    <para>Start off by going into the “gameoflife-default” configuration
    screen again. Click on “Add build step”, and add a new build step to
    “Invoke top level Maven targets” (see <xref linkend="fig-hudson-freestyle-javadoc-build-step"/>). In the Goals field,
    place <literal moreinfo="none">javadoc:javadoc</literal>—this tells Maven to generate
    the Javadoc documentation.</para>
    <figure float="0" id="fig-hudson-freestyle-javadoc-build-step">
      <title>Adding a new build step and report to generate Javadoc</title>
      <mediaobject id="I_mediaobject2_d1e2243">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0225.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0225.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Now, go to the “Post-build Action” and tick the “Publish Javadoc”
    checkbox. This project is a multimodule project, so a separate
    subdirectory is generated for each module (core, services, web, and so
    forth). For this example, you're interested in <phrase role="keep-together">displaying</phrase> the documentation for the core
    module. In the Javadoc directory field, enter
    <userinput moreinfo="none">gameoflife-core/target/site/apidocs</userinput>—this is where
    Maven places the Javadocs it generates for the core module. Jenkins
    may display an error message saying that this directory doesn’t exist at
    first. Jenkins is correct—this directory won’t exist until you run the
    <literal moreinfo="none">javadoc:javadoc</literal> goal, but since you haven’t run this
    command yet you can safely ignore the message at this stage.</para>
    <para>If you tick “Retain Javadoc for each successful build”, Jenkins
    also keeps track of the Javadocs for previous builds—not always useful, but
    it can come in handy at times.</para>
    <para>Now, trigger a build manually. You can do this either from the build
    job’s home page (using the Build Now link), or directly from the server
    home page. Once the build is finished, open the build job summary page.
    You should now see a Javadoc link featuring prominently on the screen—this
    link opens the latest version of the Javadoc documentation (see <xref linkend="fig-hudson-javadoc-results"/>). You'll also see this link on
    the build details page, where it points to the Javadoc for that
    particular build, if you've asked Jenkins to store Javadoc for
    <indexterm id="I_indexterm2_d1e2265" class="endofrange" startref="ch02-javadoc" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e2267" class="endofrange" startref="ch02-javadoc2" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e2269" class="endofrange" startref="ch02-javadoc3" significance="normal"><primary/></indexterm>each build.</para>
    <figure float="0" id="fig-hudson-javadoc-results">
      <title>Jenkins will add a Javadoc link to your build results</title>
      <mediaobject id="I_mediaobject2_d1e2275">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0226.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0226.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
  </sect1>
  <sect1 id="sect-first-steps-metrics">
    <title>Adding Code Coverage and Other Metrics</title>
    <para><indexterm class="startofrange" id="ch02-coberta1" significance="normal"><primary>code coverage metrics</primary><secondary sortas="Cobertura">with Cobertura</secondary></indexterm><indexterm class="startofrange" id="ch02-coberta2" significance="normal"><primary>Cobertura</primary></indexterm><indexterm class="startofrange" id="ch02-coberta4" significance="normal"><primary>reporting</primary><secondary>code coverage metrics</secondary></indexterm><indexterm id="I_indexterm2_d1e2297" significance="normal"><primary>build jobs</primary><secondary>code coverage metrics in</secondary><see>code coverage metrics</see></indexterm>As we mentioned earlier, reporting is one of Jenkins’s
    strong points. You've seen how easy it is to display test results and to
    publish Javadocs, but you can also publish a large number of other very
    useful reports using Jenkins plugins.</para>
    <para>Plugins<indexterm class="startofrange" id="ch02-plugin" significance="normal"><primary>plugins</primary><secondary>installing</secondary></indexterm><indexterm id="I_indexterm2_d1e2312" significance="normal"><primary>installation</primary><secondary>plugins</secondary></indexterm><indexterm id="I_indexterm2_d1e2317" significance="normal"><primary>installation</primary><secondary>plugins</secondary><seealso>specific plugins</seealso></indexterm> are another one of Jenkins’s selling points—there are
    plugins for doing just about anything, from integrating new build tools or
    version control systems to <phrase role="keep-together">notification</phrase> mechanisms and reporting. In
    addition, Jenkins plugins are very easy to install and integrate
    into the existing Jenkins architecture.</para>
    <para>To see how the plugins work, you're going to integrate code coverage
    metrics using the Cobertura plugin. Code coverage is an indication of how
    much of your application code is actually executed during your tests—it
    can be a useful tool in particular for finding areas of code that haven't
    been tested by your test suites. It can also give some indication as to
    how well a team is applying good testing practices such as Test-Driven
    Development or Behavior-Driven Development.</para>
    <para><ulink url="http://cobertura.sourceforge.net">Cobertura</ulink> is
    an open source code coverage tool that works well with both Maven and
    Jenkins. Your Maven demonstration project is already configured to record
    code coverage metrics, so all you need to do is to install the Jenkins
    Cobertura plugin and generate the code coverage metrics for Jenkins to
    record and display.</para>
    <figure float="0" id="fig-hudson-plugin-manager">
      <title>Jenkins has a large range of plugins available</title>
      <mediaobject id="I_mediaobject2_d1e2337">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0227.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0227.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>To install a new plugin, go to the Manage Jenkins page and click on
    the Manage Plugins entry. This displays a list of the available
    plugins as well as the plugins already installed on your server (see <xref linkend="fig-hudson-plugin-manager"/>). If your build server doesn’t have
    an Internet connection, you can also manually install a plugin by
    downloading the plugin file elsewhere and uploading it to your Jenkins
    installation (just open the Advanced tab in <xref linkend="fig-hudson-plugin-manager"/>), or by copying the plugin to the
    <filename moreinfo="none">$JENKINS_HOME/plugins</filename>
    directory.</para>
    <para>In your case, you're interested in the Cobertura plugin, so go to the
    Available tab and scroll down until you find the Cobertura Plugin entry in
    the Build Reports section. Click on the checkbox and then click on the
    Install button at the bottom of the screen.</para>
    <para>This downloads and installs the plugin for you. Once it's done,
    you'll need to restart your Jenkins instance to see the fruits of your
    labor. When you've restarted Jenkins, go back to the Manage Plugins
    screen and click on the Installed tab—there should now be a Cobertura
    Plugin entry in the list of installed plugins on this<indexterm id="I_indexterm2_d1e2355" class="endofrange" startref="ch02-plugin" significance="normal"><primary/></indexterm> page.</para>
    <para>Once you've made sure the plugin was successfully installed, go to
    the configuration page for the <command moreinfo="none">gameoflife-default</command> build
    job.</para>
    <para>To <indexterm id="I_indexterm2_d1e2365" significance="normal"><primary>build jobs</primary><secondary>steps in, adding</secondary></indexterm>set up code coverage metrics in your project, you need to do
    two things. First you need to generate the Cobertura coverage data in an
    XML form that Jenkins can use. Then, you need to configure Jenkins to
    display the coverage reports.</para>
    <para>Our Game of Life project already has been configured to generate XML
    code coverage reports if you ask it. All you need to do is to run
    <literal moreinfo="none">mvn cobertura:cobertura</literal> to generate the reports in XML
    form. Cobertura can also generate HTML reports, but in your case you'll be
    letting Jenkins take care of the reporting, so you can save on build time
    by not generating the report. For this example, for simplicity, you'll just add
    the <literal moreinfo="none">cobertura:cobertura</literal> goal to the second build step
    (see <xref linkend="fig-hudson-cobertura-build-step"/>). You could also
    add a new build step just for the code coverage metrics. In a real-world
    project, code quality metrics like this are typically placed in a distinct
    build job, which is run less frequently than the default build.</para>
    <figure float="0" id="fig-hudson-cobertura-build-step">
      <title>Adding another Maven goal to generate test coverage
      metrics</title>
      <mediaobject id="I_mediaobject2_d1e2385">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0228.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0228.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Next, you need to tell Jenkins to keep track of your code coverage
    metrics. Scroll down to the “Post-build Actions” section. You should see a
    new checkbox labeled Publish Cobertura Reports. Jenkins often adds UI
    elements like this when you install a new plugin. When you tick this box,
    Jenkins displays the configuration options for the Cobertura plugin
    that you installed earlier (see <xref linkend="fig-hudson-cobertura-config"/>).</para>
    <para>Like most of the code-quality related plugins in Jenkins, the
    Cobertura plugin lets you fine-tune not only the way Jenkins displays the
    report data, but also how it interprets the data. In the Coverage Metrics
    Targets section, you can define what you consider to be the minimum
    acceptable levels of code coverage. In <xref linkend="fig-hudson-cobertura-config"/>, you've configured<indexterm id="I_indexterm2_d1e2398" significance="normal"><primary>unstable builds</primary><secondary>indicator for</secondary></indexterm><indexterm id="I_indexterm2_d1e2403" significance="normal"><primary>build jobs</primary><secondary>unstable build from</secondary><tertiary>indicator for</tertiary></indexterm> Jenkins to list any builds with less than 50% test coverage
    as “unstable” (indicated by a yellow ball), and notify the team
    accordingly.</para>
    <figure float="0" id="fig-hudson-cobertura-config">
      <title>Configuring the test coverage metrics in Jenkins</title>
      <mediaobject id="I_mediaobject2_d1e2414">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0229.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0229.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>This fine-tuning often comes in handy in real-world builds. For
    example, you may want to impose a special code coverage constraint in
    release builds, to ensure high code coverage in release versions. Another
    strategy that can be useful for legacy projects is to gradually increase
    the minimum tolerated code coverage level over time. This way you can
    avoid having to retro-fit unit tests on legacy code just to raise the code
    coverage, but you do encourage all new code and bug fixes to be well
    tested.</para>
    <para>Now trigger a build manually. The first time you run the build job
    with Cobertura reporting activated, you'll see coverage statistics for
    your build displayed on the build home page, along with a Coverage Report
    link where you can go for more details (see <xref linkend="fig-hudson-initial-coverage-report"/>). The Cobertura report
    shows different types of code coverage for the build you just ran. Since you've
    only run the test coverage metrics once, the coverage will be
    displayed as red and green bars.</para>
    <figure float="none" id="fig-hudson-initial-coverage-report">
      <title>Jenkins displays code coverage metrics on the build home
      page</title>
      <mediaobject id="I_mediaobject2_d1e2428">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0230.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0230.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>If you click on the Coverage Report icon, you'll see code coverage
    for each package in your application, and you can even drill down to see the code
    coverage (or lack thereof) for an individual class (see <xref linkend="fig-hudson-code-coverage-class"/>). When you get to this level,
    Jenkins displays both the overall coverage statistics for the class, and
    also highlights the lines that were executed in green, and those that
    weren’t in red.</para>
    <para>This reporting gets better with time. Jenkins not only reports
    metrics data for the latest build, but also keeps track of metrics over
    time, so that you can see how they evolve throughout the life of the
    project.</para>
    <para>For example, if you drill down into the coverage reports, you'll
    notice that certain parts of this code are not<indexterm id="I_indexterm2_d1e2441" class="endofrange" startref="ch02-game" significance="normal"><primary/></indexterm> tested (for example the <literal moreinfo="none">Cell.java</literal> class
    in <xref linkend="fig-hudson-code-coverage-class"/>).</para>
    <figure float="0" id="fig-hudson-code-coverage-class">
      <title>Jenkins lets you display code coverage metrics for packages and
      classes</title>
      <mediaobject id="I_mediaobject2_d1e2453">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0231.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0231.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Code coverage metrics are a great way to isolate code that hasn't
    been tested, in order to add extra tests for corner cases that weren't
    properly tested during the initial development, for example. The Jenkins
    code coverage graphs are also a great way of keeping track of your code
    coverage metrics as the project grows. Indeed, as you add new tests, you'll
    notice that Jenkins displays a graph of code coverage over time,
    not just the latest results (see <xref linkend="fig-hudson-code-coverage-graph"/>).</para>
    <figure float="0" id="fig-hudson-code-coverage-graph">
      <title>Jenkins also displays a graph of code coverage over time</title>
      <mediaobject id="I_mediaobject2_d1e2465">
        <imageobject role="print">
          <imagedata fileref="figs/print/jtdg_0232.pdf" format="PDF"/>
        </imageobject>
        <imageobject role="web">
          <imagedata fileref="figs/web/jtdg_0232.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Note that your objective here isn't to improve the code coverage
    just for the sake of improving code coverage—you're adding an extra test
    to verify some code that was not previously tested, and as a result the
    code coverage goes up. There's a subtle but important difference
    here—code coverage, as with any other metric, is very much a means to an
    end (high code quality and low maintenance costs), and not an end in
    itself.</para>
    <para>Nevertheless, <indexterm id="I_indexterm2_d1e2474" class="endofrange" startref="ch02-coberta1" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e2476" class="endofrange" startref="ch02-coberta2" significance="normal"><primary/></indexterm><indexterm id="I_indexterm2_d1e2478" class="endofrange" startref="ch02-coberta4" significance="normal"><primary/></indexterm>metrics like this can give you a great insight into the
    health of your project, and Jenkins presents them in a particularly
    accessible way.</para>
    <para>This is just one of the code quality metrics plugins that have been
    written for Jenkins. There are many more (over fifty reporting plugins
    alone at the time of writing). We’ll look at some more of them in <xref linkend="chapter-code-quality"/>.</para>
  </sect1>
  <sect1 id="I_sect12_d1e2485">
    <title id="sect-first-steps-conclusion">Conclusion</title>
    <para>In this chapter, you've gone through what you need to know to get
    started with Jenkins. You should be able to set up a new build job, 
    report on JUnit test results, and create javadocs. You've also seen
    how to add a reporting plugin and keep tabs on code coverage. Well done!
    But there’s still a lot more to learn about Jenkins. In the following
    chapters, you'll be looking at how Jenkins can help improve your
    build automation process in many other areas as well.</para>
  </sect1>
</chapter>
